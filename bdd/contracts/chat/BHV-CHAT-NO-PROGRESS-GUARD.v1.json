{
  "id": "BHV-CHAT-NO-PROGRESS-GUARD",
  "intent": "PI 对齐后，重复失败场景不应触发 no-progress 守卫事件，系统应按 max_steps 稳定收口",
  "context": {
    "surface": "sidepanel.chat.loop",
    "signals": ["max_steps"],
    "signature_dimensions": ["tool", "kind", "tabId", "target", "expect"],
    "gate_profile": "default"
  },
  "steps": [
    "build_action_signature_for_each_step",
    "allow_repeated_failures_to_continue_without_emitting_no_progress_events",
    "converge_by_max_steps_when_goal_not_advanced",
    "return_non_done_terminal_status"
  ],
  "observables": [
    "repeated_failure_signature_does_not_emit_loop_no_progress",
    "repeated_failure_signature_does_not_emit_retry_circuit_open_or_retry_budget_exhausted",
    "loop_termination_status_is_max_steps_for_no_progress_cases",
    "termination_never_reports_done"
  ],
  "risk": "high",
  "allowed_side_effects": [
    "step_stream_append(signature_and_reason)",
    "loop_status_transition(max_steps)"
  ],
  "proof_requirements": {
    "required_layers": ["unit", "integration", "browser-cdp", "e2e"],
    "min_layers": 4
  },
  "degrade_policy": {
    "on_repeated_failure_without_progress": [
      "continue_until_max_steps",
      "return_max_steps_terminal_status"
    ]
  },
  "rollback_or_compensation": [
    "record_failure_signature_trace_for_postmortem",
    "allow_manual_stop_or_new_goal_to_start_next_round"
  ],
  "version": "1.0.0"
}
